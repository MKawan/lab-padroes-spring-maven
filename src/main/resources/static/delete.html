<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Clientes</title>
</head>
<body>
    <h1>Deletar Cliente</h1>
		<label for="cpf">CPF:</label>
		<input type="number" id="cpf" name="cpf" required><br><br>
		<button onclick="carregarCliente()">Deletar</button>
	<table id="clienteTable">
	        <thead>
	            <tr>
	                <th>ID</th>
	                <th>Nome</th>
	                <th>CEP</th>
	                <th>Logradouro</th>
	                <th>Complemento</th>
	                <th>Bairro</th>
	                <th>Localidade</th>
	                <th>UF</th>
	                <th>IBGE</th>
	                <th>GIA</th>
	                <th>DDD</th>
	                <th>SIAFI</th>
	            </tr>
	        </thead>
	        <tbody id="clienteBody">
	            <!-- Os clientes serão adicionados aqui dinamicamente -->
				<h3 id="delet"></h3>
	        </tbody>
	    </table>
    <script>
		
        function carregarCliente() {
			
	        // Função para fazer a requisição GET para /clientes
			const cpf = document.getElementById("cpf").value;
			console.log(cpf)
            const xhr = new XMLHttpRequest();
			xhr.open('DELETE', `/clientes/${cpf}`, true);	// Substitua com o caminho do seu endpoint
            xhr.setRequestHeader('Content-Type', 'application/json');
			
            xhr.onload = function() {
                if (xhr.status === 200) {
                    const cliente = JSON.parse(xhr.responseText);
                    exibirCliente(cliente);
                } else {
                    console.error('Erro ao carregar clientes:', xhr.status);
                }
			const divD = document.getElementById("delet");
			divD.textContent = "Cleinte deletado com sucesso!"
            };

            xhr.onerror = function() {
                console.error('Erro ao fazer requisição GET para /clientes.');
            };

            xhr.send();
        }

        // Função para exibir os clientes na tabela
        function exibirCliente(cliente) {
            const tabelaBody = document.getElementById('clienteBody');
            tabelaBody.innerHTML = ''; // Limpa o conteúdo anterior

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${cliente.id}</td>
                    <td>${cliente.name}</td>
                    <td>${cliente.endereco.cep}</td>
                    <td>${cliente.endereco.logradouro}</td>
                    <td>${cliente.endereco.complemento}</td>
                    <td>${cliente.endereco.bairro}</td>
                    <td>${cliente.endereco.localidade}</td>
                    <td>${cliente.endereco.uf}</td>
                    <td>${cliente.endereco.ibge}</td>
                    <td>${cliente.endereco.gia}</td>
                    <td>${cliente.endereco.ddd}</td>
                    <td>${cliente.endereco.siafi}</td>
                `;
				tabelaBody.appendChild(tr);
        }

		</script>
</body>
</html>