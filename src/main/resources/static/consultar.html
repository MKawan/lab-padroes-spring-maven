<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Clientes</title>
</head>
<body>
    <h1>Lista de Clientes</h1>
    <table id="clientesTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>CEP</th>
                <th>Logradouro</th>
                <th>Complemento</th>
                <th>Bairro</th>
                <th>Localidade</th>
                <th>UF</th>
                <th>IBGE</th>
                <th>GIA</th>
                <th>DDD</th>
                <th>SIAFI</th>
            </tr>
        </thead>
        <tbody id="clientesBody">
            <!-- Os clientes serão adicionados aqui dinamicamente -->
        </tbody>
    </table>

    <script>
        // Função para fazer a requisição GET para /clientes
        function carregarClientes() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/clientes/all', true); // Substitua com o caminho do seu endpoint
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onload = function() {
                if (xhr.status === 200) {
                    const clientes = JSON.parse(xhr.responseText);
                    exibirClientes(clientes);
                } else {
                    console.error('Erro ao carregar clientes:', xhr.status);
                }
            };

            xhr.onerror = function() {
                console.error('Erro ao fazer requisição GET para /clientes.');
            };

            xhr.send();
        }

        // Função para exibir os clientes na tabela
        function exibirClientes(clientes) {
            const tabelaBody = document.getElementById('clientesBody');
            tabelaBody.innerHTML = ''; // Limpa o conteúdo anterior

            clientes.forEach(function(cliente) {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${cliente.id}</td>
                    <td>${cliente.name}</td>
                    <td>${cliente.endereco.cep}</td>
                    <td>${cliente.endereco.logradouro}</td>
                    <td>${cliente.endereco.complemento}</td>
                    <td>${cliente.endereco.bairro}</td>
                    <td>${cliente.endereco.localidade}</td>
                    <td>${cliente.endereco.uf}</td>
                    <td>${cliente.endereco.ibge}</td>
                    <td>${cliente.endereco.gia}</td>
                    <td>${cliente.endereco.ddd}</td>
                    <td>${cliente.endereco.siafi}</td>
                `;
                tabelaBody.appendChild(tr);
            });
        }

        // Carrega os clientes quando a página é carregada
        window.onload = carregarClientes;
    </script>
</body>
</html>
